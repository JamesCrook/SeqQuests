<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protein Sequence Match Explorer</title>
    <link rel="icon" href="./wheel.ico">
    <link rel="stylesheet" type="text/css" href="./style.css">
    <script src="./match_explorer.js"></script>

</head>
<body>
    <header>
        <button class="hamburger-menu" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        
        <h1>Protein Sequence Match Explorer</h1>
        <div class="status-indicator">
            <div class="status-dot" id="statusDot"></div>
            <span id="statusText">Checking Connection</span>
        </div>
    </header>

    <div class="container explorer-layout">
        <!-- Top Panel: Alignment View -->
        <div class="panel alignment-panel" id="TopPanel">
            <div class="panel-header">
                <div class="panel-title">Alignment Visualization</div>
                <div style="display: flex; gap: 12px; align-items: center;">
                    <button class="copy-button" id="copyAlignmentBtn" onclick="copyAlignment()">Copy Alignment</button>
                    <div class="panel-badge" id="alignmentBadge">—</div>
                </div>
            </div>
            <div class="alignment-viewer-container" id="alignmentViewer">
                <div class="empty-state">
                    <div class="empty-state-icon">╳</div>
                    <div class="empty-state-text">No alignment selected</div>
                    <div class="empty-state-subtext">Hover over an entry to view alignment</div>
                </div>
            </div>
        </div>

        <!-- Left Panel: Findings List -->
        <div class="panel findings-panel" id="LeftPanel">
            <div class="panel-header">
                <div class="panel-title">Protein Alignments</div>
                <div class="panel-badge" id="entriesCount">14 entries</div>
            </div>
            <div class="findings-list" id="findingsList">
                <!-- Findings will be populated here -->
            </div>
        </div>

        <!-- Right Panel: Detail View -->
        <div class="panel detail-panel-container" id="RightPanel">
            <div class="panel-header">
                <div class="panel-title">Sequence Details</div>
                <div class="panel-badge" id="detailBadge">—</div>
            </div>
            <div class="sequence-viewer" id="detailViewer">
                <div class="empty-state">
                    <div class="empty-state-icon">◯</div>
                    <div class="empty-state-text">Select an alignment to view details</div>
                    <div class="empty-state-subtext">Hover over entries in the left panel to explore sequence data</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE_URL = window.location.origin; // Will use same origin as page
        const API_TIMEOUT = 5300; // milliseconds
        let isServerConnected = false;
        let usingRealFindings = false; // Track if we loaded real findings from server

        let currentHoveredEntry = null;
        let isInitializing = false;
        let isLoadingSequence = false;
        let lastLoadedEntry = null;
        
        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            initializeApp();
        });
    </script>
</body>
</html>