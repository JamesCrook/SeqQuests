<!DOCTYPE html>
<html>
  <head>
    <title>Job Control Panel</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
    <link rel="icon" href="./wheel.ico">
    <script src="./lcars.js"></script>
    <script src="./app.js"></script>
    <script src="./job_monitor.js"></script>
  </head>
  <body class="app-root">
    <header>
      <button class="hamburger-menu" aria-label="Menu">
        <span>
        </span>
        <span>
        </span>
        <span>
        </span>
      </button>
      <h1>Job Control Panel</h1>
      <div class="status-indicator">
        <div class="status-dot" id="statusDot">
        </div>
        <span id="statusText">Checking Connection</span>
      </div>
    </header>
    <!-- Main Content Container that will be populated by LCARS -->
    <div id="main-container" style="height: calc(100vh - 80px); overflow: hidden;">
      <!-- Placeholder for LCARS content -->
    </div>
    <div id="config-modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 100; background: var(--bg-secondary); padding: 20px; border: 1px solid var(--accent-primary); width: 80%; max-width: 800px; max-height: 80vh;">
      <div id="modal-content">
        <div id="config-container" style="min-height:0px;">
        </div>
      </div>
      <div class="modal-footer" style="margin-top: 20px;">
        <button onclick="closeModal()">Close</button>
      </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
            // Load the job management partial immediately
            // Since this IS the job management page, we act as if "Job Queue" command was sent.
            // But we are not inside an LCARS layout with MainPanel/SubPanel.
            // This page seems to be a dedicated page.
            // The user said: "job_management.html... should fetch their actual panel content in much the same way"
            // And "Ideally Job Queue is wired up to load the main container from job_management.html"

            // To reuse Lcars.loadPartial, we need an ID.
            // Let's load into #main-container
            Lcars.loadPartial('main-container', './panels/job_management_content.html', () => {
                 // Init
                 if (typeof window.initJobManagement === 'function') {
                     window.initJobManagement();
                 }
            });
        });
    </script>
  </body>
</html>
