<!DOCTYPE html>
<html>
<head>
    <title>Configure Computation Job</title>
    <link rel="stylesheet" type="text/css" href="/static/style.css">
</head>
<body>
    <h2>Configure Computation Job</h2>
    <form id="configForm">
        <label for="max_proteins">Max Proteins:</label>
        <input type="number" id="max_proteins" name="max_proteins" value="100"><br>
        <label for="use_fast_nws">Use Fast NWS:</label>
        <input type="checkbox" id="use_fast_nws" name="use_fast_nws" checked><br>
        <button type="button" onclick="saveConfig()">Save Configuration</button>
    </form>

    <script src="/static/job_monitor.js"></script>
    <script>
        function saveConfig() {
            const jobId = getJobIdFromUrl();
            if (!jobId) return;

            const config = {
                max_proteins: document.getElementById('max_proteins').value,
                use_fast_nws: document.getElementById('use_fast_nws').checked,
            };

            parent.apiCall(`/api/job/${jobId}/configure`, 'POST', { config })
                .then(() => parent.addLog(`Configuration saved for job ${jobId}`))
                .catch(e => parent.addLog(`Failed to save config: ${e}`, 'error'));
        }

        window.addEventListener('load', () => {
            loadJobConfig();
        });
    </script>
</body>
</html>
